!function t(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("datetime-picker",[],n):"object"==typeof exports?exports["datetime-picker"]=n():e["datetime-picker"]=n()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function e(){return t.default}:function e(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,n){var i,r,a;!function(n,o){r=[!function t(){var e=new Error('Cannot find module "moment"');throw e.code="MODULE_NOT_FOUND",e}()],i=o,a="function"==typeof i?i.apply(e,r):i,!(void 0!==a&&(t.exports=a))}(this,function(t){"use strict";function e(){}function n(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^16*Math.random()>>t/4).toString(16)})}function i(t,e){for(;t&&t!==document;){if(t.getAttribute("id")===e)return!0;t=t.parentNode}return!1}function r(e){var i=void 0!==arguments[1]?arguments[1]:{},a=this;if(!(this instanceof r))return new r(e,i);if(this._container=n(),r.hasOwnProperty("properties")||(r.prototype.properties={format:{default:"DD/MM/YYYY",attribute:"format",getset:!0},model:{default:t(),moment:!0,attribute:"value"},display:{default:!1,getset:!0},hideOnDayClick:{default:!0},hideOnEnter:{default:!0},min:{default:t("1986-01-01"),moment:!0,attribute:"min",getset:!0},max:{default:t().add(1,"year").month(11),moment:!0,attribute:"max",getset:!0},months:{default:t.months(),getset:!0},days:{default:t.weekdaysShort(),getset:!0},inputName:{default:"dpicker-input",attribute:"name"},inputId:{default:n(),attribute:"id"},empty:{default:!1},valid:{default:!0},order:{default:["months","years","time","days"]}}),this.onChange=i.onChange,this._data={},this._loadModules(),this._initData(i),document.addEventListener("click",this._events.hide),"undefined"==typeof e)throw new ReferenceError("Can not initialize DPicker without a container");if(void 0!==e.length&&e[0]&&(e=e[0]),"INPUT"===e.tagName){if(!e.parentNode)throw new ReferenceError("Can not initialize DPicker on an input without parent node");this._parseInputAttributes([].slice.call(e.attributes));var o=e.parentNode;e.parentNode.removeChild(e),e=o,e.classList.add("dpicker")}this._initialize(),this.mount(e,this.renderContainer(this._events,this._data,[this.renderInput(this._events,this._data),this.render(this._events,this._data,this.getRenderChild())])),e.setAttribute("id",this._container),e.addEventListener("keydown",this._events.keyDown);var s=e.querySelector("input");return s.addEventListener("blur",this._events.inputBlur),document.addEventListener("touchend",function(t){a._events.inputBlur(t)}),this.rootElement=e,this}return r.prototype.toggle=function(){var t=this.rootElement.querySelector(".dpicker-container");this.display===!0?(t.classList.remove("dpicker-invisible"),t.classList.add("dpicker-visible")):(t.classList.add("dpicker-invisible"),t.classList.remove("dpicker-visible"))},r.prototype._initialize=function(){this.isValid(this._data.model)},r.prototype.mount=function(t,e){t.appendChild(e)},r.prototype.replace=function(t,e){var n=this.rootElement.querySelector(t);n.parentNode.replaceChild(e,n)},r.prototype.merge=function(t,e){for(var n=this.rootElement.querySelector(t),i=0;i<e.attributes.length;i++){var r=e.attributes[i];n.getAttribute(r.name)!==r.value&&n.setAttribute(r.name,r.value)}for(var a=0;a<n.attributes.length;a++){var o=n.attributes[a];e.hasAttribute(o.name)||n.removeAttribute(o.name)}e.value!==n.value&&(n.value=e.value)},r.prototype.redraw=function(t){t||(t=["input","container"]);for(var e=0;e<t.length;e++)switch(t[e]){case"input":this.merge("input",this.renderInput(this._events,this._data));break;case"days":this.replace("table",this.renderDays(this._events,this._data));break;case"container":this.replace(".dpicker-container",this.render(this._events,this._data,this.getRenderChild()))}},r.prototype.getRenderChild=function(){var t={years:this.renderYears(this._events,this._data),months:this.renderMonths(this._events,this._data)};for(var e in this._modulesRender)for(var n in this._modulesRender[e])t[n]=this._modulesRender[e][n](this._events,this._data);return t.days=this.renderDays(this._events,this._data),this._data.order.filter(function(e){return t[e]}).map(function(e){return t[e]})},r.prototype._initData=function(t){var e=this,n=function(n){var i=e.properties[n];return!i.getset||n in r.prototype||Object.defineProperty(r.prototype,n,{get:function(){return this._data[n]},set:function(t){this._data[n]=t,"display"===n?this.toggle():this.redraw()}}),e._data[n]=i.default,void 0===t[n]?0:"model"!==n||t[n]?void(e._data[n]=t[n]):(e._data.empty=!0,1)},i;t:for(var a in this.properties)switch(i=n(a)){case 0:continue t;case 1:continue t}},r.prototype._parseInputAttributes=function(e){var n=this,i=function(i){var r=n.properties[i];if(void 0===r.attribute)return 0;if("function"==typeof r.attribute)return n._data[i]=r.attribute(e),1;var a=e.find(function(t){return t.name===r.attribute});if(!a)return 2;var o=a.value;return o?r.moment===!0&&(o=t(a.value,n._data.format,!0),o.isValid()===!1)?5:void(n._data[i]=o):"model"===i?(n._data.empty=!0,3):4},r;t:for(var a in this.properties)switch(r=i(a)){case 0:continue t;case 1:continue t;case 2:continue t;case 3:continue t;case 4:continue t;case 5:continue t}},r.prototype._loadModules=function t(){var e=this;this._events=this._loadEvents(),this._modulesRender={};for(var n in r.modules){var i=r.modules[n],a=this,o=function(t){return a._events[t]?(a._events[t+"-internal"]||(a._events[t+"-internal"]=[a._events[t]],a._events[t]=function(n){e._events[t+"-internal"].map(function(t){return t.bind(e)(n)})}),void a._events[t+"-internal"].unshift(i.events[t])):(a._events[t]=i.events[t].bind(a),0)},s=void 0;t:for(var u in i.events)switch(s=o(u)){case 0:continue t}var d=this,l=function(t){return r.prototype.hasOwnProperty(t)&&"function"==typeof i.calls[t]?(d[t+"-internal"]||(d[t+"-internal"]=[r.prototype[t]],d[t]=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];e[t+"-internal"].map(function(t){return t.apply(e,n)})}),void d[t+"-internal"].push(i.calls[t])):0},c=void 0;t:for(var p in i.calls)switch(c=l(p)){case 0:continue t}if(i.render)for(var h in i.render)this._modulesRender[h]=i.render;if(i.properties)for(var f in i.properties)this.properties[f]||(this.properties[f]=i.properties[f])}},r.prototype._loadEvents=function e(){var n=this;return{hide:function(t){if(n.display!==!1){var e=t.target;i(e.parentNode,n._container)||(n.display=!1)}},inputChange:function(e){if(e.target.value){var i=t(e.target.value,n._data.format,!0);n.isValid(i)===!0&&(n._data.model=i),n._data.empty=!1}else n._data.empty=!0;n.redraw(["input","container"]),n.onChange()},inputBlur:function(t){if(n.display!==!1){var e=t.relatedTarget||t.target;i(e.parentNode,n._container)||(n.display=!1)}},inputFocus:function(t){n.display=!0,t.target&&t.target.select&&t.target.select()},yearChange:function(t){n._data.empty=!1,n._data.model.year(t.target.options[t.target.selectedIndex].value),n.isValid(n._data.model),n.redraw(["input","days"]),n.onChange()},monthChange:function(t){n._data.empty=!1,n._data.model.month(t.target.options[t.target.selectedIndex].value),n.isValid(n._data.model),n.redraw(["input","days"]),n.onChange()},dayClick:function(t){t.preventDefault(),t.stopPropagation(),n._data.model.date(t.target.value),n._data.empty=!1,n._data.hideOnDayClick&&(n.display=!1),n.isValid(n._data.model),n.redraw(["input","days"]),n.onChange()},dayKeyDown:function(){},keyDown:function(t){if(n._data.hideOnEnter){var e=t.which||t.keyCode;13!==e&&27!==e||(document.getElementById(n.inputId).blur(),n.display=!1)}}}},r.prototype.isValid=function e(n){if(!(n instanceof t&&n.isValid()))return this._data.valid=!1,!1;var i=this.time?"minute":"day";return n.isBefore(this._data.min,i)||n.isAfter(this._data.max,i)?(this._data.valid=!1,!0):(this._data.valid=!0,!0)},r.prototype.renderInput=function t(e,n,i){return this.h("input",{id:n.inputId,value:n.empty?"":n.model.format(n.format),type:"text",min:n.min.format(n.format),max:n.max.format(n.format),format:n.format,onchange:e.inputChange,onfocus:e.inputFocus,name:n.inputName,"aria-invalid":!n.valid,"aria-haspopup":!0,class:n.valid?"":"dpicker-invalid"})},r.prototype.renderContainer=function t(e,n,i){return this.h("div",{class:"dpicker"},i)},r.prototype.render=function t(e,n,i){return this.h("div",{"aria-hidden":!n.display,class:"dpicker-container "+(n.display?"dpicker-visible":"dpicker-invisible")},i)},r.prototype.renderYears=function t(e,n,i){for(var r=n.model.year(),a=n.max.year()+1,o=n.min.year(),s=[];--a>=o;)s.push(this.h("option",{value:a,selected:a===r,key:a},""+a));return this.h("select",{onchange:e.yearChange,name:"dpicker-year","aria-label":"Year"},s)},r.prototype.renderMonths=function t(e,n,i){var r=this,a=n.model.month(),o=n.model.year(),s=n.months,u=n.months.map(function(t,e){return e});if(n.max.year()===o){var d=n.max.month();u=u.filter(function(t){return t<=d})}if(n.min.year()===o){var l=n.min.month();u=u.filter(function(t){return t>=l})}return this.h("select",{onchange:e.monthChange,name:"dpicker-month","aria-label":"Month"},u.map(function(t,e){return r.h("option",{value:t,selected:t===a,key:t},s[t])}))},r.prototype.renderDays=function n(i,r,a){var o=this,s=r.model.daysInMonth(),u=r.model.clone().subtract(1,"months").daysInMonth(),d=t.localeData().firstDayOfWeek(),l=+r.model.clone().date(1).format("e")-1,c=r.model.date(),p,h,f=new Array(7);r.days.map(function(t,e){f[e<d?6-e:e-d]=t}),r.model.isSame(r.min,"month")&&(p=r.min.date()),r.model.isSame(r.max,"month")&&(h=r.max.date());var m=new Array(Math.ceil(.1+(l+s)/7)).fill(0),v,y,_=!0;return this.h("table",[this.h("tr",f.map(function(t){return o.h("th",t)})),m.map(function(t,n){return o.h("tr",{key:n},new Array(7).fill(0).map(function(t,r){return y=_,r<=l&&0===n?(v=u-(l-r),y=!1):r===l+1&&0===n?(v=1,y=!0):(v===s&&(v=0,y=!1,_=!1),v++),y===!0&&(y="undefined"!=typeof p?v>=p:y,y="undefined"!=typeof h?v<=h:y),o.h("td",{class:y?"dpicker-active":"dpicker-inactive"},[o.h(""+(y?"button":"span"),{value:v,"aria-label":!!y&&"Day "+v,"aria-disabled":!y,onclick:y?i.dayClick:e,type:y?"button":null,onkeydown:y?i.dayKeyDown||e:e,class:c===v?"dpicker-active":""},v)])}))})])},r.prototype._modelSetter=function(t){this._data.empty=!t,this.isValid(t)===!0&&(this._data.model=t),this.redraw()},Object.defineProperties(r.prototype,{container:{get:function(){return this._container}},inputId:{get:function(){return this._data.inputId}},input:{get:function(){return this._data.empty?"":this._data.model.format(this._data.format)}},onChange:{set:function(t){var e=this;this._onChange=function(){return!!t&&t(e._data)}},get:function(){return this._onChange}},valid:{get:function(){return this._data.valid}},model:{set:function(t){this._modelSetter(t)},get:function(){return this._data.model}}}),r.h=r.prototype.h=function t(e,n,i){var r=document.createElement(e),a=document.createDocumentFragment();"[object Object]"!==n.toString()&&(i=n,n={}),"undefined"==typeof i?i=[]:Array.isArray(i)||(i=[i]);for(var o in n)n[o]&&("on"===o.substr(0,2)?r[o]=n[o]:n[o]===!0?r.setAttribute(o,o):r.setAttribute(o,n[o]));for(var s=0;s<i.length;s++){if("string"==typeof i[s]||"number"==typeof i[s]){r.innerText=i[s];break}Array.isArray(i[s])?i[s].map(function(t){return a.appendChild(t)}):a.appendChild(i[s])}return r.appendChild(a),r},r.modules={},r})},function(t,e,n){var i,r,a;!function(o,s){r=[n(0),!function t(){var e=new Error('Cannot find module "moment"');throw e.code="MODULE_NOT_FOUND",e}()],i=s,a="function"==typeof i?i.apply(e,r):i,!(void 0!==a&&(t.exports=a))}(this,function(t,e){"use strict";function n(t){var n=t.target.value.charAt(0),i=t.target.value.slice(1)||0;"-"!==n&&"+"!==n||("-"===n&&(i||(i=1),i=-i),this._data.model=e().add(i,"days"),this.onChange())}if(!t)throw new ReferenceError("DPicker is required for this extension to work");var i=t.modules.modifiers={events:{inputChange:n}};return i})},function(t,e,n){var i,r,a;!function(o,s){r=[n(0),!function t(){var e=new Error('Cannot find module "moment"');throw e.code="MODULE_NOT_FOUND",e}()],i=s,a="function"==typeof i?i.apply(e,r):i,!(void 0!==a&&(t.exports=a))}(this,function(t,e){"use strict";function n(t){var e=t.meridiem?a:r,n=i.filter(function(e){return e%t.step===0});return[t.min,t.max].map(function(i,r){if(t.model.isSame(i,"day")){var a=+t.meridiem?i.format("h"):i.hours();if(e=e.filter(function(t){return 0===r?t>=a:t<=a}),t.model.isSame(i,"hours")){var o=i.minutes();n=n.filter(function(t){return 0===r?t>=o:t<=a})}}}),{hours:e,minutes:n}}if(!t)throw new ReferenceError("DPicker is required for this extension to work");var i=new Array(60).fill(0).map(function(t,e){return e}),r=new Array(24).fill(0).map(function(t,e){return e}),a=new Array(12).fill(0).map(function(t,e){return 0===e?12:e});a.push(a.shift());var o=function e(i,r,a){if(!r.time)return t.h("span",{style:"display: none;",class:"dpicker-time"});var o=r.model.hours();r.meridiem&&(o=o>12?o-12:o,o=0===o?12:o);var s=n(r),u=s.hours,d=s.minutes,l=r.model.minutes(),c=[t.h("select",{onchange:i.hoursChange,name:"dpicker-hours","aria-label":"Hours"},u.map(function(e,n){return t.h("option",{value:e,selected:e===o,key:e},e<10?"0"+e:e)})),t.h("select",{onchange:i.minutesChange,name:"dpicker-minutes","aria-label":"Minutes"},d.map(function(e){return t.h("option",{value:e,selected:e===l,key:e},e<10?"0"+e:""+e)}))];if(r.meridiem){var p=r.model.format("A");c.push(t.h("select",{onchange:i.meridiemChange,name:"dpicker-meridiem"},["AM","PM"].map(function(e){return t.h("option",{value:e,selected:p===e},e)})))}return t.h("span",{class:"dpicker-time"},c)},s={hoursChange:function t(e){this._data.empty=!1;var n=parseInt(e.target.options[e.target.selectedIndex].value,10);this._data.meridiem&&("PM"===this._data.model.format("A")?n=12===n?12:n+12:12===n&&(n=0)),this._data.model.hours(n),this._minutesStep(),this.redraw(["input","container"]),this.onChange()},minutesChange:function t(e){this._data.empty=!1,this._data.model.minutes(e.target.options[e.target.selectedIndex].value),this.redraw(["input","container"]),this.onChange()},meridiemChange:function t(e){this._data.empty=!1;var n=e.target.options[e.target.selectedIndex].value,i=this._data.model.hours();i="AM"===n?12===i?0:i-12:12===i?12:i+12,this._data.model.hours(i),this.redraw(["input","container"]),this.onChange()},inputChange:function(){this._minutesStep()}},u=t.modules.time={events:s,render:{time:o},properties:{time:{default:!1,attribute:function(t){var e=t.find(function(t){return"type"===t.name});return!!e&&"datetime"===e.value},getset:!0},meridiem:{default:!1,attribute:"meridiem",getset:!0},step:{default:1,attribute:function(t){var e=t.find(function(t){return"step"===t.name});return e?parseInt(e.value,10):1},getset:!0}},calls:{_initialize:function t(e){this._minutesStep()},_modelSetter:function t(e){this._minutesStep()}}};return t.prototype._minutesStep=function(){if(this._data.time){var t=n(this._data),e=t.hours,i=t.minutes,r=this._data.model.minutes();if(0===i.length){this._data.min.minutes(0),this._data.min.add(1,"hours");var a=n(this._data),o=a.hours,s=a.minutes}return this._data.model.minutes()<i[0]&&(this._data.model.minutes(i[0]),r=i[0]),r>i[i.length-1]?(this._data.model.minutes(0),void this._data.model.add(1,"hours")):void(this._data.step<=1||(i[i.length]=60,r=i.reduce(function(t,e){return Math.abs(e-r)<Math.abs(t-r)?e:t}),i.length--,this._data.model.minutes(r)))}},u})},function(t,e,n){var i,r,a;!function(o,s){var u;r=[e,n(0),n(2),n(1)],i=s,a="function"==typeof i?i.apply(e,r):i,!(void 0!==a&&(t.exports=a))}(this,function(t,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(e),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,i)}if("value"in r)return r.value;var o=r.get;if(void 0!==o)return o.call(i)},d="ft-dpicker",l="select",c="materialTextfieldInstance",p=function t(e){var n,i=e.querySelectorAll("select");return i.length?(n=e,i.forEach(function(t,e){var n=t.parentNode,i=document.createElement("div");i.classList.add(l),i.appendChild(t),n.appendChild(i)})):"select"==e.nodeName.toLowerCase()&&(n=document.createElement("div"),n.classList.add(l),n.appendChild(e)),n};o.default.modules.customSelectModule={render:{years:function t(e,n,i){return p(o.default.prototype.renderYears(e,n,i))},months:function t(e,n,i){return p(o.default.prototype.renderMonths(e,n,i))},time:function t(e,n,i){var r=o.default.modules.time.render.time(e,n,i);return p(r)}}},o.default.modules.mdlModule={events:{inputFocus:function t(e){var n=base.utils.data.get(e.target,c);n&&n.onFocus_()},inputBlur:function t(e){var n=base.utils.data.get(e.target,c);n&&n.onBlur_()}}};var h=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"init",value:function t(){var e=this;if(this._$materialWrapper=null,this._$materialTextfield=null,this.options.mdl&&(this._$materialWrapper=this.node.closest("."+this.options.mdlContainerClass),this._$materialTextfield=new MaterialTextfield(this._$materialWrapper)),this.picker=new o.default(this.node,this.options),this.picker.time=this.options.time,this.picker.rootElement.classList.add(d),this.picker.rootElement.classList.add(this.options.themeClass),this._givenDpickerOnChangeListener=this.picker.onChange,this.options.mdl){this.picker.rootElement.classList.add(this.options.mdlClass);var n=this.picker.rootElement.querySelector("input");n.classList.add(this._$materialTextfield.CssClasses_.INPUT),this._$materialTextfield.input_=n,base.utils.data.set(n,c,this._$materialTextfield)}this.picker.onChange=function(){e._dpickerOnChange()}}},{key:"_dpickerOnChange",value:function t(){this.options.mdl&&(this._$materialTextfield.updateClasses_(),this._$materialTextfield.input_.classList.add(this._$materialTextfield.CssClasses_.INPUT)),this._givenDpickerOnChangeListener()}},{key:"destroy",value:function t(){u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this.picker=null}}]),e}(base.features.Feature);h.defaultOptions={mdl:!1,mdlClass:"-mdl",mdlContainerClass:"mdl-js-datetimefield",themeClass:"",time:!0,meridiem:!1,order:["years","months","time","days"],format:"DD.MM.YYYY HH:mm",model:moment(),min:moment().subtract(2,"year"),max:moment().add(2,"year")},t.default=h})}])});
//# sourceMappingURL=datetime-picker.min.js.map